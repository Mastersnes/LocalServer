define(["jquery","underscore","app/utils/utils"],function(c,g,e){return function(){this.acceleration={x:1,y:2};this.vitesse={x:4,y:0};this.v0={x:0,y:-15};this.max={x:3,y:15};this.flag={tombe:!0,cours:!1,lockCours:!1};this.move=function(a,c){var b=e.clone(this.acceleration),d=this.vitesse;e.clone(this.v0);var f=e.clone(this.max);this.flag.cours&&(b.x*=2);a.x=c*d.x*b.x;a.y=d.y;d.y+=b.y;d.y>f.y&&(d.y=f.y)};this.saute=function(a){a||(a=1);this.vitesse.y=this.v0.y*a};this.marche={anim:0,incr:0,direction:1};
this.marche=function(a){0==a?(this.marche.anim=0,this.marche.incr=0):(this.marche.incr||(this.marche.incr=1),this.marche.anim+=this.marche.incr,3==this.marche.anim&&(this.marche.incr=-1),1==this.marche.anim&&(this.marche.incr=1));c("#player").removeClass(function(a,b){return(b.match(/\bmarche-\S+/g)||[]).join(" ")});c("#player").removeClass(function(a,b){return(b.match(/\bcours-\S+/g)||[]).join(" ")});a=this.flag.cours?"cours":"marche";c("#player").addClass(a+"-"+this.marche.anim)};this.oriente=function(a){0!=
a&&(a=0<a?1:-1);a&&this.marche.direction!=a&&(this.marche.direction=a,c("#player").css({"-moz-transform":"scaleX("+this.marche.direction+")","-o-transform":"scaleX("+this.marche.direction+")","-webkit-transform":"scaleX("+this.marche.direction+")",transform:"scaleX("+this.marche.direction+")"}))}}});