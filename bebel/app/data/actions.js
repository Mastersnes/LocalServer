define(["jquery"],function(g){var h={ralenti:{useY:function(b){var a=this.dom;a.attr("soundPlay",!0);var c=0.2;a.attr("vitesse")&&(c=parseFloat(a.attr("vitesse")));b.moveEngine.acceleration.x=c},reset:function(b){var a=this.dom;a.attr("soundPlay")&&(a.removeAttr("soundPlay"),b.stopSound("/cat.mp3"));b.moveEngine.acceleration.x=1}},glisse:{useY:function(b){var a=this.dom,c=2,d=0;a.attr("vitesse")&&(c=parseFloat(a.attr("vitesse")));a.attr("acceleration")&&(d=parseFloat(a.attr("acceleration")));b.moveEngine.acceleration.x=
c;b.flag.move=b.moveEngine.marche.direction;b.flag.glisse=!0;a.attr("vitesse",c+d)},reset:function(b){b.moveEngine.acceleration.x=1;b.flag.glisse=!1}},"bouge-verticale":{useY:function(b){var a=this.dom;if(0!=a.position().top){var c=-1;a.attr("move")?c=a.attr("move"):(a.attr("move",c),a.attr("start",a.position().top));var d=parseFloat(a.attr("start")),c=parseInt(c),e=1;a.attr("vitesse")&&(e=parseInt(a.attr("vitesse")));var f=50;a.attr("distance")&&(f=parseInt(a.attr("distance")));a.css({top:"+\x3d"+
c*e+"px"});b.position.y=a.position().top-50;a.position().top<d-f?a.attr("move",1):a.position().top>d+f&&a.attr("move",-1)}},reset:function(b){b=this.dom;if(0!=b.position().top&&!(-100>b.offset().left-b.width()||b.offset().left>g(".game").width()+100)){var a=-1;b.attr("move")?a=b.attr("move"):(b.attr("move",a),b.attr("start",b.position().top));var c=parseFloat(b.attr("start")),a=parseInt(a),d=1;b.attr("vitesse")&&(d=parseInt(b.attr("vitesse")));var e=50;b.attr("distance")&&(e=parseInt(b.attr("distance")));
b.css({top:"+\x3d"+a*d+"px"});b.position().top<c-e?b.attr("move",1):b.position().top>c+e&&b.attr("move",-1)}}},explose:{useY:function(b){var a=this.dom;a.attr("index");var c=0;a.attr("delay")&&(c=parseInt(a.attr("delay")));a.attr("soundPlay",!0);c++;a.attr("delay",c);10<=c&&(a.attr("delay",0),c=1,a.attr("saut")&&(c=parseInt(a.attr("saut"))),c++,a.attr("saut",c),a.removeClass(function(a,b){return(b.match(/\bsaut-\S+/g)||[]).join(" ")}),a.addClass("saut-"+c),4==c&&(a.removeAttr("soundPlay"),b.stopSound("/effort.mp3"),
b.playSound("/boom.mp3"),a.attr("delay",9)),4<c&&(a.removeClass(function(a,b){return(b.match(/\bsaut-\S+/g)||[]).join(" ")}),a.removeAttr("saut"),b.flag.dead=!0))},reset:function(b){var a=this.dom;a.attr("soundPlay")&&(a.removeAttr("soundPlay"),b.stopSound("/psss.mp3"));a.attr("index");a.attr("delay",0);a.removeClass(function(a,b){return(b.match(/\bsaut-\S+/g)||[]).join(" ")});a.removeAttr("saut")}},tombe:{useY:function(b){var a=this.dom;a.attr("index");var c=0;a.attr("delay")&&(c=parseInt(a.attr("delay")));
a.attr("soundPlay",!0);c++;a.attr("delay",c);a.hasClass("shake")||a.addClass("shake");15==c&&(a.removeAttr("soundPlay"),b.stopSound("/effort.mp3"),b.playSound("/pouah.mp3"),a.attr("lastTop",a.position().top),a.animate({top:"1500px"},1E3))},reset:function(b){var a=this.dom;a.attr("index");a.attr("delay",0);a.removeClass("shake");var c=a.attr("lastTop");a.attr("soundPlay")&&(a.removeAttr("soundPlay"),b.stopSound("/effort.mp3"));c&&(a.removeAttr("lastTop"),a.animate({top:c}))}},rebondi:{useY:function(b){b.moveEngine.flag.tombe||
b.moveEngine.saute(2)}},"bouge-tue":{useY:function(b){b.flag.dead=!0},useX:function(b){this.useY(b)},reset:function(b){b=this.dom;if(0!=b.position().top&&!(-100>b.offset().left-b.width()||b.offset().left>g(".game").width()+100)){var a=1;b.attr("vitesse")&&(a=b.attr("vitesse"));var c=1;b.attr("descente")&&(c=b.attr("descente"));var d=100;b.attr("distance")&&(d=b.attr("distance"));var e=-1*a;b.attr("move")?e=b.attr("move"):(b.attr("move",e),b.attr("start",b.position().top));var f=parseFloat(b.attr("start"));
b.css({top:"+\x3d"+e+"px"});b.position().top<f-d?b.attr("move",1*c):b.position().top>f&&b.attr("move",-1*a)}}},bouton:{useY:function(b){b=this.dom.attr("cible");b=g(".stage .element[ref\x3d"+b+"]");0<b.length&&b.attr("active",!0)}},porte:{useX:function(b){this.dom.hasClass("mortel")&&(b.flag.dead=!0)},useY:function(b){this.dom.hasClass("mortel")&&(b.flag.dead=!0)},reset:function(b){var a=this.dom;if(a.attr("active")){a.attr("index");a.attr("soundPlay")||(a.attr("soundPlay",!0),b.playSound("/tremor.mp3"));
var c=1;a.attr("vitesse")&&(c=a.attr("vitesse"));var d=1;a.attr("descente")&&(d=a.attr("descente"));c*=-1;a.attr("move")?c=a.attr("move"):(a.attr("delay",0),a.addClass("ouverture"),a.attr("move",c),a.attr("start",a.position().top));var e=parseFloat(a.attr("start"));a.css({top:"+\x3d"+c+"px"});a.position().top<e-100?(b.stopSound("/tremor.mp3"),b=0,a.attr("delay")&&(b=parseInt(a.attr("delay"))),b++,a.attr("delay",b),1==b&&(a.addClass("shake"),a.addClass("mortel")),10<=b?(a.removeClass("ouverture"),
a.attr("move",1*d)):a.attr("move",0)):a.position().top>=e&&(a.removeAttr("soundPlay"),b.playSound("/boom.mp3"),a.attr("delay",0),a.css({top:"\x3d"+e+"px"}),a.removeClass("shake"),a.removeAttr("active"),a.removeClass("mortel"),a.removeAttr("move"))}}},checkpoint:{useY:function(b){var a=this.dom;a.hasClass("active")||(a.addClass("active"),b.savePosition())}}};return{get:function(b){return g.extend(!0,{},h[b])}}});